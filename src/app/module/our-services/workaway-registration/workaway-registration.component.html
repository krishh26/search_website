<main>
  <section class="registration-section margin-top104"
    style="background-image: url(/assets/img/search-background-image.png);">
    <div class="overlay-bg" style="opacity: 1;">
      <div class="container">
        <div class="text-center text-white">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="serviceTypeOptions" id="workawayOption" value="option1"
              (change)="onServiceTypeChange('option1')" [checked]="selectedServiceType === 'option1'">
            <label class="form-check-label" for="workawayOption">WorkAway</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="serviceTypeOptions" id="itSubcontractingOption"
              value="option2" (change)="onServiceTypeChange('option2')" [checked]="selectedServiceType === 'option2'">
            <label class="form-check-label" for="itSubcontractingOption">IT Subcontracting</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="serviceTypeOptions" id="e2eQAOption" value="option3"
              (change)="onServiceTypeChange('option3')" [checked]="selectedServiceType === 'option3'">
            <label class="form-check-label" for="e2eQAOption">E2E QA Services</label>
          </div>

          <h1 class="page-titletop mt-3">WorkAway Registration - IT Talent Banking</h1>
          <p>Register for WorkAway IT talent recruitment services. Access pre-approved IT professionals for your business needs.</p>
        </div>
        <div class="FlatCard text-dark" style="z-index: 1;">
          <div class="card-body p-5">
            <div class="row">
              <div class="col-12">
                <div class="text-center">
                  <p class="p-16 p-600 text-muted">In just a minute away</p>
                  <h2 class="page-titletop text-dark">Register with <span class="text-primary">Spectrum IT Hub</span>
                  </h2>
                </div>
                <ul class="wizard mt-3 mb-5">
                  <li [class.active]="!showContactForm">
                    <span data-translate="">Need Details</span>
                  </li>
                  <li [class.active]="showContactForm">
                    <span data-translate="">Contact Details</span>
                  </li>
                </ul>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-12">
                <div class="alert" role="alert" style="background-color: #E5E4E2; border-color: #E5E4E2;">
                  <i class="bi bi-exclamation-triangle-fill me-2"></i>
                  <strong>Quick Guide:</strong> Complete your WorkAway registration to access pre-approved IT talent.<br>
                  <strong>Action:</strong> Fill in your requirements and contact details to get started with talent banking.
                </div>
              </div>
            </div>

            <form [formGroup]="registrationForm" class="needs-validation" *ngIf="!showContactForm">
              <div class="row mb-3 align-items-center">
                <label for="professiontype" class="col-sm-3 col-form-label">I Am a <span
                    class="text-danger">*</span></label>
                <div class="col-sm-9">
                  <select class="form-select" id="professiontype" formControlName="professionType"
                    [class.is-invalid]="registrationForm.get('professionType')?.touched && registrationForm.get('professionType')?.errors">
                    <option selected disabled value="">Choose from below...</option>
                    <option>Corporate recruitment teams</option>
                    <option>IT recruitment agency</option>
                    <option>Software house</option>
                    <option>IT service provider</option>
                  </select>
                  <div class="invalid-feedback" *ngIf="getRegistrationFormError('professionType')">
                    {{ getRegistrationFormError('professionType') }}
                  </div>
                </div>
              </div>

              <div class="row mb-3">
                <label for="registrationType" class="col-sm-3 col-form-label">I am registering for <span
                    class="text-danger">*</span></label>
                <div class="col-sm-9">
                  <div class="d-flex flex-wrap gap-3">
                    <div class="form-check-inline">
                      <input class="form-check-input me-2" type="radio" name="registrationType" id="bankClientOption1"
                        value="representative" formControlName="registrationType"
                        (change)="onRegistrationTypeChange('representative')">
                      <label class="form-check-label" for="bankClientOption1">
                        Representative for my client
                      </label>
                    </div>
                    <div class="form-check-inline">
                      <input class="form-check-input me-2" type="radio" name="registrationType" id="bankBusinessOption1"
                        value="business" formControlName="registrationType"
                        (change)="onRegistrationTypeChange('business')">
                      <label class="form-check-label" for="bankBusinessOption1">
                        I am a business
                      </label>
                    </div>
                  </div>
                  <div class="form-check ps-4 mt-2" *ngIf="isRepresentativeForClient">
                    <input class="form-check-input" type="checkbox" formControlName="whiteLabelOption">
                    <label class="form-check-label" for="invalidCheck">
                      I would like to discuss white labelling options
                    </label>
                  </div>
                </div>
              </div>

              <div class="row mb-3 align-items-center">
                <label for="demandReady" class="col-sm-3 col-form-label">Have the demand ready? <span
                    class="text-danger">*</span></label>
                <div class="col-sm-9">
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="hasDemandReady" id="demandYes" value="yes"
                      formControlName="hasDemandReady" (change)="onDemandReadyChange('yes')">
                    <label class="form-check-label" for="demandYes">Yes</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="hasDemandReady" id="demandNo" value="no"
                      formControlName="hasDemandReady" (change)="onDemandReadyChange('no')">
                    <label class="form-check-label" for="demandNo">No</label>
                  </div>
                  <div class="invalid-feedback"
                    *ngIf="registrationForm.get('hasDemandReady')?.touched && registrationForm.get('hasDemandReady')?.errors?.['required']">
                    Please select an option.
                  </div>
                </div>
              </div>

              <div *ngIf="hasDemandReady">
                <div class="row mb-3 align-items-center">
                  <label for="requirement" class="col-sm-3 col-form-label">Enter Your Requirement <span
                      class="text-danger">*</span></label>
                  <div class="col-sm-9">
                    <input type="text" class="form-control" formControlName="requirement"
                      [class.is-invalid]="registrationForm.get('requirement')?.touched && registrationForm.get('requirement')?.errors"
                      placeholder="Eg. Angular Developer, QA Engineer">
                    <div class="invalid-feedback" *ngIf="getRegistrationFormError('requirement')">
                      {{ getRegistrationFormError('requirement') }}
                    </div>
                  </div>
                </div>
                <div class="row mb-3 align-items-center">
                  <label for="engagementType" class="col-sm-3 col-form-label">Engagement Type <span
                      class="text-danger">*</span></label>
                  <div class="col-sm-9">
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="engagementType" id="Fulldelivery" value="full"
                        formControlName="engagementType">
                      <label class="form-check-label" for="Fulldelivery">Full Time</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="engagementType" id="Partdelivery" value="part"
                        formControlName="engagementType">
                      <label class="form-check-label" for="Partdelivery">Part Time</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="engagementType" id="Ongoing" value="ongoing"
                        formControlName="engagementType">
                      <label class="form-check-label" for="Ongoing">Project Based</label>
                    </div>
                    <div class="invalid-feedback"
                      *ngIf="registrationForm.get('engagementType')?.touched && registrationForm.get('engagementType')?.errors?.['required']">
                      Please select an engagement type.
                    </div>
                  </div>
                </div>
                <div class="row mb-3 align-items-center">
                  <label for="description" class="col-sm-3 col-form-label">Description <span
                      class="text-danger">*</span></label>
                  <div class="col-sm-9">
                    <textarea class="form-control" rows="2" cols="100" formControlName="description"
                      [class.is-invalid]="registrationForm.get('description')?.touched && registrationForm.get('description')?.errors"
                      placeholder="Describe your specific requirements..."></textarea>
                    <div class="invalid-feedback" *ngIf="getRegistrationFormError('description')">
                      {{ getRegistrationFormError('description') }}
                    </div>
                  </div>
                </div>
                <div class="row mb-3 align-items-center">
                  <label for="language" class="col-sm-3 col-form-label">Choose Skills <span
                      class="text-danger">*</span></label>
                  <div class="col-sm-9">
                    <div class="position-relative">
                      <input type="text" class="form-control" placeholder="Search skills..."
                        [(ngModel)]="skillSearch" [ngModelOptions]="{standalone: true}"
                        (input)="onSkillSearchChange($event)" (blur)="onSkillInputBlur()" autocomplete="off">

                      <!-- Dropdown for skills -->
                      <div class="dropdown-menu w-100 show" *ngIf="showSkillDropdown && skillsList.length > 0"
                        style="position: absolute; top: 100%; left: 0; z-index: 1000; max-height: 200px; overflow-y: auto;">
                        <div class="dropdown-item" *ngFor="let skill of skillsList"
                          (click)="selectSkill(skill)" style="cursor: pointer; padding: 8px 16px;">
                          {{ skill.name }}
                        </div>
                      </div>

                      <!-- Loading indicator -->
                      <div class="dropdown-menu w-100 show" *ngIf="showSkillDropdown && isLoadingSkill"
                        style="position: absolute; top: 100%; left: 0; z-index: 1000;">
                        <div class="dropdown-item text-center" style="padding: 8px 16px;">
                          <i class="bi bi-arrow-clockwise spin"></i> Loading...
                        </div>
                      </div>

                      <!-- No records found -->
                      <div class="dropdown-menu w-100 show"
                        *ngIf="showSkillDropdown && hasSearchedSkill && !isLoadingSkill && skillsList.length === 0 && skillSearch.length > 0"
                        style="position: absolute; top: 100%; left: 0; z-index: 1000;">
                        <div class="dropdown-item text-center" style="padding: 8px 16px;">
                          No records found
                        </div>
                      </div>
                    </div>

                    <!-- Selected skills display -->
                    <div class="mt-2" *ngIf="selectedSkills.length > 0">
                      <ul class="searchresult-tags mb-2">
                        <li *ngFor="let skill of selectedSkills"
                          style="cursor: pointer; background-color: #f8f9fa;">
                          <span>{{ skill.name }}</span>
                          <span class="remove-tag" (click)="removeSkill(skill._id)">
                            <i class="bi bi-x"></i>
                          </span>
                        </li>
                      </ul>
                    </div>

                    <!-- Hidden input for form validation -->
                    <input type="hidden" formControlName="language">
                    <div class="invalid-feedback" *ngIf="getRegistrationFormError('language')">
                      {{ getRegistrationFormError('language') }}
                    </div>
                  </div>
                </div>
                <div class="row mb-3 align-items-center">
                  <label for="dates" class="col-sm-3 col-form-label">Start Date, End Date & Budget <span
                      class="text-danger">*</span></label>
                  <div class="col-sm-9">
                    <div class="row">
                      <div class="col-lg-4 col-xl-4 col-sm-4 col-md-4 col-12 mob-mb1">
                        <input type="date" class="form-control" formControlName="startDate"
                          [class.is-invalid]="registrationForm.get('startDate')?.touched && registrationForm.get('startDate')?.errors">
                        <div class="invalid-feedback" *ngIf="getRegistrationFormError('startDate')">
                          {{ getRegistrationFormError('startDate') }}
                        </div>
                      </div>
                      <div class="col-lg-4 col-xl-4 col-sm-4 col-md-4 col-12 mob-mb1">
                        <input type="date" class="form-control" formControlName="endDate"
                          [class.is-invalid]="registrationForm.get('endDate')?.touched && registrationForm.get('endDate')?.errors">
                        <div class="invalid-feedback" *ngIf="getRegistrationFormError('endDate')">
                          {{ getRegistrationFormError('endDate') }}
                        </div>
                      </div>
                      <div class="col-lg-4 col-xl-4 col-sm-4 col-md-4 col-12 mob-mb1">
                        <select class="form-select" formControlName="budget"
                          [class.is-invalid]="registrationForm.get('budget')?.touched && registrationForm.get('budget')?.errors">
                          <option value="">Select Budget</option>
                          <option value="5">5 Lac</option>
                          <option value="1-5">1-5 Lac</option>
                        </select>
                        <div class="invalid-feedback" *ngIf="getRegistrationFormError('budget')">
                          {{ getRegistrationFormError('budget') }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- WorkAway specific file upload section -->
                <div class="row mb-3 align-items-center">
                  <label for="fileUpload" class="col-sm-3 col-form-label">Upload Requirements <span
                      class="text-danger">*</span></label>
                  <div class="col-sm-9">
                    <p class="mt-2">
                      <button type="button" class="btn btn-light me-2" (click)="openUploadModal()">
                        <i class="bi bi-upload"></i>
                        <span>Upload File</span>
                      </button>
                      <button type="button" class="btn btn-link text-primary" (click)="downloadSampleCSV()"
                        [disabled]="isUploading">
                        <u>Sample File</u>
                      </button>
                    </p>
                    <div *ngIf="fileUpload" class="alert alert-success mt-2">
                      <i class="bi bi-check-circle me-2"></i>
                      File uploaded successfully: {{ fileUpload.name }}
                    </div>
                  </div>
                </div>
              </div>

              <!-- Your Tags Section -->
              <div class="row mb-3">
                <div>
                  <label for="iama" class="col-sm-3 col-form-label">Your Search :</label>
                </div>
                <div class="col-12">
                  <ul class="searchresult-tags mb-4">
                    <ng-container *ngFor="let item of visibleCombinedTags">
                      <li style="cursor: pointer; background-color: #f8f9fa;">
                        <span *ngIf="item.type === 'workaway'">
                          {{ item.jobTitle }}
                          <p style="font-size: 10px; text-align: center; margin-bottom: 0px !important;">(WorkAway)</p>
                        </span>
                        <span *ngIf="item.type === 'itsubcontract'">
                          {{ item.projectName || item.expertise }}
                          <p style="font-size: 10px; text-align: center; margin-bottom: 0px !important;">(IT
                            Subcontracting)
                          </p>
                        </span>
                        <span class="remove-tag" *ngIf="item.type === 'workaway'" (click)="removeFilter(item._id)"><i
                            class="bi bi-x"></i></span>
                        <span class="remove-tag" *ngIf="item.type === 'itsubcontract'"
                          (click)="removeFilterItSub(item._id)"><i class="bi bi-x"></i></span>
                        <br>
                      </li>
                    </ng-container>
                    <button class="btn btn-link p-0" (click)="toggleShowAllTags()" *ngIf="showToggleButton">
                      {{ showAllTags ? 'View Less' : 'View More' }}
                    </button>
                  </ul>
                </div>
              </div>

              <!-- Your Cart Items Section -->
              <div class="row mb-3" *ngIf="cartItems?.items?.length">
                <div>
                  <label for="iama" class="col-sm-3 col-form-label">Your Carts :</label>
                </div>
                <div class="col-12">
                  <div *ngIf="cartItems.items && cartItems?.items?.length > 0;" class="row">
                    <div *ngFor="let item of cartItems.items; let i = index" class="cartCard mb-3 col-12"
                      [ngStyle]="{'border-left': '5px solid ' + getBorderColor(i)}">
                      <div class="card-body p-4 d-flex justify-content-between align-items-center">
                        <div>
                          <h4><strong>{{ maskName(item.itemDetails.fullName || item.itemDetails.companyName) }}</strong>, <small>{{ item.itemDetails.gender || 'N/A' }}</small></h4>
                          <p class="mb-0">Job Title : {{ item.itemDetails.jobTitle || item.itemDetails.role || 'N/A' }}</p>
                          <ul class="inlineList mt-2">
                            <li><i class="bi bi-mortarboard-fill text-muted me-2"></i> Qualification- {{ item.itemDetails.highestQualification || 'N/A' }}</li>
                            <li><i class="bi bi-briefcase-fill text-muted me-2"></i> Experience- {{ item.itemDetails.totalExperience || 'N/A' }}</li>
                            <li><i class="bi bi-cash text-muted me-2"></i> Day Rate- {{ item.itemDetails.ukDayRate || 'N/A' }}</li>
                          </ul>
                        </div>
                        <button (click)="removeCartItem(item._id)" class="remove-btn ms-3">
                          <i class="bi bi-trash"></i> Remove
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-group text-end">
                <button class="btn btn-dark me-2" (click)="goBack()"><i class="bi bi-arrow-left me-2"></i> Go
                  Back</button>
                <button class="btn btn-primary" type="button" (click)="nextStep()">Next Step <i
                    class="bi bi-arrow-right ms-2"></i></button>
              </div>
            </form>

            <form [formGroup]="contactForm" class="needs-validation" *ngIf="showContactForm">
              <div class="form-group">
                <label>Business name <span class="text-danger">*</span></label>
                <input type="text" class="form-control" formControlName="businessName"
                  [class.is-invalid]="contactForm.get('businessName')?.touched && contactForm.get('businessName')?.errors"
                  placeholder="Enter your business name...">
                <div class="invalid-feedback" *ngIf="getContactFormError('businessName')">
                  {{ getContactFormError('businessName') }}
                </div>
              </div>
              <div class="form-group">
                <label>Address <span class="text-danger">*</span></label>
                <textarea class="form-control" formControlName="address" cols="100" rows="1"
                  [class.is-invalid]="contactForm.get('address')?.touched && contactForm.get('address')?.errors"
                  placeholder="Enter your address..."></textarea>
                <div class="invalid-feedback" *ngIf="getContactFormError('address')">
                  {{ getContactFormError('address') }}
                </div>
              </div>
              <div class="form-group">
                <label>Your Full Name <span class="text-danger">*</span></label>
                <input type="text" class="form-control" formControlName="fullName"
                  [class.is-invalid]="contactForm.get('fullName')?.touched && contactForm.get('fullName')?.errors"
                  placeholder="Enter your name...">
                <div class="invalid-feedback" *ngIf="getContactFormError('fullName')">
                  {{ getContactFormError('fullName') }}
                </div>
              </div>
              <div class="form-group">
                <label>Job Title <span class="text-danger">*</span></label>
                <input type="text" class="form-control" formControlName="jobTitle"
                  [class.is-invalid]="contactForm.get('jobTitle')?.touched && contactForm.get('jobTitle')?.errors"
                  placeholder="Enter your job title...">
                <div class="invalid-feedback" *ngIf="getContactFormError('jobTitle')">
                  {{ getContactFormError('jobTitle') }}
                </div>
              </div>
              <div class="form-group">
                <label>Phone Number <span class="text-danger">*</span></label>
                <input type="text" class="form-control" formControlName="phoneNumber" (keypress)="NumberOnly($event)"
                  [class.is-invalid]="contactForm.get('phoneNumber')?.touched && contactForm.get('phoneNumber')?.errors"
                  placeholder="Enter your phone number...">
                <div class="invalid-feedback" *ngIf="getContactFormError('phoneNumber')">
                  {{ getContactFormError('phoneNumber') }}
                </div>
              </div>
              <div class="form-group">
                <label>Email Address <span class="text-danger">*</span></label>
                <input type="text" class="form-control" formControlName="email"
                  [class.is-invalid]="contactForm.get('email')?.touched && contactForm.get('email')?.errors"
                  placeholder="Enter your email id...">
                <div class="invalid-feedback" *ngIf="getContactFormError('email')">
                  {{ getContactFormError('email') }}
                </div>
              </div>
              <div class="form-group">
                <label>How did you hear about us?</label>
                <input type="text" class="form-control" formControlName="hearAboutUs" placeholder="Enter details...">
              </div>
              <div class="form-group text-end">
                <button class="btn btn-dark me-2" (click)="goBack()"><i class="bi bi-arrow-left me-2"></i> Go
                  Back</button>
                <button class="btn btn-primary" type="button" (click)="onSubmit()">Submit <i
                    class="bi bi-save2 ms-2"></i></button>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="mb-5">
        <h5 class="headingTitle">The most <span class="text-primary">demanding skills</span></h5>
        <p>Get some Inspirations from 86K+ skills</p>
      </div>
      <div class="row">
        <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-6">
          <div class="light-gray-card">
            <img src="/assets/img/ui-ux.gif" height="60" class="mb-4" />
            <p class="mb-0"><strong>UX/UX Designer</strong></p>
            <p class="mb-0 p-12">250 Skills</p>
          </div>
        </div>
        <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-6">
          <div class="light-gray-card">
            <img src="/assets/img/softwarte-developer.gif" height="60" class="mb-4" />
            <p class="mb-0"><strong>Software Developer</strong></p>
            <p class="mb-0 p-12">250 Skills</p>
          </div>
        </div>
        <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-6">
          <div class="light-gray-card">
            <img src="/assets/img/software-testing.gif" height="60" class="mb-4" />
            <p class="mb-0"><strong>Software Tester</strong></p>
            <p class="mb-0 p-12">250 Skills</p>
          </div>
        </div>
        <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-6">
          <div class="light-gray-card">
            <img src="/assets/img/frontend-developer.gif" height="60" class="mb-4" />
            <p class="mb-0"><strong>Frontend Developer</strong></p>
            <p class="mb-0 p-12">250 Skills</p>
          </div>
        </div>
        <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-6">
          <div class="light-gray-card">
            <img src="/assets/img/api-developer.gif" height="60" class="mb-4" />
            <p class="mb-0"><strong>API Developer</strong></p>
            <p class="mb-0 p-12">250 Skills</p>
          </div>
        </div>
        <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-6">
          <div class="light-gray-card">
            <img src="/assets/img/fullstack-developer.gif" height="60" class="mb-4" />
            <p class="mb-0"><strong>Fullstack Developer</strong></p>
            <p class="mb-0 p-12">250 Skills</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<!--Upload Bulk  Modal -->
<div class="modal fade" id="uploadbulkModal" tabindex="-1" aria-labelledby="uploadbulkModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="uploadbulkModalLabel">Upload Requirements</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <h5><strong>Please upload the data as a PDF, Word document, or Excel file.</strong></h5>
        <p>Include key details like the number of quantities and the roles required.
          Also, let us know the expected timeline—how many days you need this delivered in. That way we can plan
          accordingly.</p>
        <div class="row justify-content-center mt-5">
          <div class="col-lg-6 col-xl-6 col-md-6 col-sm-6 col-12">
            <input type="file" #fileInput (change)="onFileUpload($event)" accept=".csv,.xlsx,.xls,.pdf,.doc,.docx"
              style="display: none">
            <a href="javascript:void(0);" class="download-csv-btn shadow-nm" (click)="fileInput.click()">
              <img src="/assets/img/csv-file.png">
              <span class="p-22 p-600">Upload File</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>